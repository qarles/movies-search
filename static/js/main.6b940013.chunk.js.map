{"version":3,"sources":["components/Movies/movies.module.scss","components/Header/header.module.scss","components/ProgressiveImage/progressive-image.module.scss","store/actions/movies.ts","store/reducers/movies.ts","store/utils/createReducer.ts","store/reducers/index.ts","store/services/api.ts","store/sagas/movies.ts","store/sagas/index.ts","store/index.ts","components/Header/Header.tsx","components/Header/index.tsx","store/selectors/movies.ts","components/ProgressiveImage/ProgressiveImage.tsx","components/Movies/Movie.tsx","components/Movies/Movies.tsx","components/Movies/index.tsx","components/Spinner/Spinner.tsx","components/Main/Main.tsx","App.tsx","index.tsx"],"names":["module","exports","list","no-results","element","element_hidden","element__link","element__image","element__vote-wrapper","element__vote","element__title","header","logo","logo__image","form","form__input","form__select","image","image_progress","MOVIES_FETCH","MOVIES_SEARCH","searchMovies","search","type","phrase","year","receiveMovies","movies","resetMovies","queryParams","queryStringParse","window","location","initialState","isLoading","undefined","page","pages","total","createReducer","handlers","state","arguments","length","action","Object","prototype","hasOwnProperty","call","_createReducer","defineProperty","_objectSpread","_ref","_ref$movies","_ref$search","toConsumableArray","concat","combineReducers","Helper","mapResults","results","total_results","total_pages","map","mapResult","_ref2","id","overview","poster_path","release_date","title","vote_average","date","small","medium","large","vote","prepareUrl","params","query","API","getMovies","_getMovies","asyncToGenerator","regenerator_default","a","mark","_callee","_ref3","response","data","wrap","_context","prev","next","fetch","sent","json","abrupt","stop","_x","_x2","apply","this","callMovies","fetchMovies","fetchMoviesWatcher","searchMoviesWatcher","put","_marked","_context2","select","_state$movies","_state$movies2","_marked2","_context3","_marked3","_context4","takeLatest","_marked4","_context5","debounce","_marked5","root","all","sagas_marked","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","sagaMiddleware","reduxSaga","store","createStore","rootReducer","applyMiddleware","run","rootSaga","currentYear","Date","getFullYear","years","Array","from","e","idx","reverse","React","memo","onSearch","initialYear","_useState","useState","_useState2","slicedToArray","setSearch","_useState3","_useState4","setYear","useEffect","react_default","createElement","className","styles","alt","src","onSubmit","preventDefault","autoFocus","value","placeholder","onChange","target","key","HeaderContainer","withRouter","history","useSelector","dispatch","useDispatch","useCallback","searchMoviesAction","push","components_Header_Header","preview","props","objectWithoutProperties","isLoaded","setIsLoaded","Image","onload","currentValue","assign","cx","style","Movie","components_ProgressiveImage_ProgressiveImage","onError","movie","Movies_Movie","_useSelector","Movies","show","hasMore","removeListener","callback","removeEventListener","documentElement","document","innerHeight","scrollTop","offsetHeight","addEventListener","react_router","path","component","components_Spinner_Spinner","App","es","react_router_dom","components_Header","components_Main_Main","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.6b940013.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"movies_list__i04n0\",\"no-results\":\"movies_no-results__3WBe2\",\"element\":\"movies_element__FOPWu\",\"element_hidden\":\"movies_element_hidden__14YJv\",\"element__link\":\"movies_element__link__3p-50\",\"element__image\":\"movies_element__image__22ofU\",\"element__vote-wrapper\":\"movies_element__vote-wrapper__1bvED\",\"element__vote\":\"movies_element__vote__1rbbf\",\"element__title\":\"movies_element__title__3l4GA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__3fn4i\",\"logo\":\"header_logo__14tHM\",\"logo__image\":\"header_logo__image__cVPkB\",\"form\":\"header_form__3Ry9u\",\"form__input\":\"header_form__input__WncE_\",\"form__select\":\"header_form__select__1eZjZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"progressive-image_image__Ar7dz\",\"image_progress\":\"progressive-image_image_progress__9vKrS\"};","import { Action } from 'redux';\n\nexport const MOVIES_FETCH = 'MOVIES_FETCH';\nexport const MOVIES_RECEIVED = 'MOVIES_RECEIVED';\nexport const MOVIES_SEARCH = 'MOVIES_SEARCH';\nexport const MOVIES_RESET = 'MOVIES_RESET';\n\nexport interface MoviesReceivedAction extends Action {\n  readonly type: typeof MOVIES_RECEIVED;\n  readonly search: Search;\n  readonly movies: Movies;\n}\n\nexport interface GetMoviesAction extends Action {\n  readonly type: typeof MOVIES_FETCH;\n}\n\nexport interface SearchMoviesAction extends Action {\n  readonly type: typeof MOVIES_SEARCH;\n  readonly phrase: Search['phrase'];\n  readonly year?: Search['year'];\n}\n\nexport interface ResetMoviesAction extends Action {\n  readonly type: typeof MOVIES_RESET;\n}\n\nexport const getMovies = (): GetMoviesAction => ({\n  type: MOVIES_FETCH\n});\n\nexport const searchMovies = (search: Search): SearchMoviesAction => ({\n  type: 'MOVIES_SEARCH',\n  phrase: search.phrase,\n  year: search.year\n});\n\nexport const receiveMovies = (\n  movies: Movies,\n  search: Search\n): MoviesReceivedAction => ({\n  type: MOVIES_RECEIVED,\n  search,\n  movies\n});\n\nexport const resetMovies = (): ResetMoviesAction => ({\n  type: 'MOVIES_RESET'\n});\n","import { parse as queryStringParse } from 'query-string';\n\nimport {\n  MOVIES_FETCH,\n  MOVIES_RECEIVED,\n  MOVIES_RESET,\n  MoviesReceivedAction\n} from '../actions';\nimport createReducer from '../utils/createReducer';\n\nconst queryParams: Partial<Search> = queryStringParse(window.location.search);\nconst phrase = queryParams.phrase || undefined;\nconst year = queryParams.year || undefined;\n\nconst initialState: MoviesState = {\n  isLoading: false,\n  phrase,\n  year,\n  movies: [],\n  page: 0,\n  pages: 0,\n  total: 0\n};\n\nexport default createReducer(initialState, {\n  [MOVIES_FETCH]: state => {\n    const { movies, total } = state;\n    if (movies.length < total) {\n      return {\n        ...state,\n        isLoading: true\n      };\n    }\n    return state;\n  },\n\n  [MOVIES_RESET]: () => ({\n    ...initialState,\n    phrase: undefined,\n    year: undefined\n  }),\n  [MOVIES_RECEIVED]: (\n    state,\n    {\n      movies: { page, pages, total, movies },\n      search: { phrase, year }\n    }: MoviesReceivedAction\n  ) => ({\n    ...state,\n    phrase,\n    year,\n    page,\n    pages,\n    total,\n    movies: page === 1 ? [...movies] : [...state.movies, ...movies],\n    isLoading: false\n  })\n});\n","import { Action, Reducer } from 'redux';\n\ntype Handlers<S> = {\n  [key: string]: (state: S, action: any) => S;\n};\n\nexport default <S>(initialState: S, handlers: Handlers<S>): Reducer<S> => <\n  A extends Action\n>(\n  state: S = initialState,\n  action: A\n) =>\n  Object.prototype.hasOwnProperty.call(handlers, action.type)\n    ? handlers[action.type](state, action)\n    : state;\n","import { combineReducers } from 'redux';\n\nimport movies from './movies';\n\nexport default combineReducers({\n  movies\n});\n","type Params = {\n  page: number;\n  query: Search['phrase'];\n  year?: Search['year'];\n};\n\nconst Helper = {\n  mapResults({ results, total_results, page, total_pages }: ApiMovies): Movies {\n    return {\n      page,\n      pages: total_pages,\n      total: total_results,\n      movies: results.map(Helper.mapResult)\n    };\n  },\n  mapResult({\n    id,\n    overview,\n    poster_path,\n    release_date,\n    title,\n    vote_average\n  }: ApiMovie): Movie {\n    return {\n      id,\n      date: release_date,\n      image: poster_path\n        ? {\n            small: `https://image.tmdb.org/t/p/w92${poster_path}`,\n            medium: `https://image.tmdb.org/t/p/w300${poster_path}`,\n            large: `https://image.tmdb.org/t/p/w780${poster_path}`\n          }\n        : undefined,\n      title,\n      overview,\n      vote: vote_average\n    };\n  },\n  prepareUrl(params: Params): string {\n    const basePath = 'https://api.themoviedb.org/3';\n\n    let queryParams = `api_key=03c93abb1975c0c02a167e1b3e8b63d4&page=${\n      params.page\n    }&query=${params.query}`;\n    if (params.year) {\n      queryParams = `${queryParams}&year=${params.year}`;\n    }\n\n    return `${basePath}/search/movie?${queryParams}`;\n  }\n};\n\nexport const API = {\n  async getMovies(\n    page: number,\n    { phrase: query, year }: Search\n  ): Promise<Movies> {\n    const response: Response = await fetch(\n      Helper.prepareUrl({ page, query, year })\n    );\n    const data: ApiMovies = await response.json();\n\n    return Helper.mapResults(data);\n  }\n};\n","import { call, debounce, put, select, takeLatest } from 'redux-saga/effects';\n\nimport {\n  MOVIES_FETCH,\n  MOVIES_SEARCH,\n  MoviesReceivedAction,\n  receiveMovies,\n  resetMovies,\n  SearchMoviesAction\n} from '../actions';\nimport { API } from '../services/api';\n\nfunction* callMovies(page: Movies['page'], search: Search) {\n  const movies: Movies = yield call(API.getMovies, page, search);\n  yield put<MoviesReceivedAction>(receiveMovies(movies, search));\n}\n\nfunction* fetchMovies() {\n  const { phrase, year }: Search = yield select((state: State) => {\n    const { phrase, year } = state.movies;\n    return { phrase, year };\n  });\n\n  if (!phrase) {\n    yield put(resetMovies());\n  } else {\n    const canFetchMore = yield select((state: State) => {\n      const { total, movies } = state.movies;\n      return movies.length < total;\n    });\n    if (canFetchMore) {\n      const page: Movies['page'] = yield select(\n        (state: State) => state.movies.page\n      );\n      yield call(callMovies, page + 1, { phrase, year });\n    }\n  }\n}\n\nfunction* searchMovies(action: SearchMoviesAction) {\n  const { phrase, year } = action;\n  if (!phrase) {\n    yield put(resetMovies());\n  } else {\n    yield call(callMovies, 1, { phrase, year });\n  }\n}\n\nexport function* fetchMoviesWatcher() {\n  yield takeLatest(MOVIES_FETCH, fetchMovies);\n}\n\nexport function* searchMoviesWatcher() {\n  yield debounce(500, MOVIES_SEARCH, searchMovies);\n}\n","import { all } from 'redux-saga/effects';\n\nimport { fetchMoviesWatcher, searchMoviesWatcher } from './movies';\n\nexport default function* root() {\n  yield all([fetchMoviesWatcher(), searchMoviesWatcher()]);\n}\n","import { applyMiddleware, compose, createStore } from 'redux';\nimport reduxSaga from 'redux-saga';\n\nimport rootReducer from './reducers';\nimport rootSaga from './sagas';\n\nconst composeEnhancer =\n  (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst sagaMiddleware = reduxSaga();\nconst store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(sagaMiddleware))\n);\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;\n","import React, { useEffect, useState } from 'react';\n\nimport styles from './header.module.scss';\n\nconst currentYear = new Date().getFullYear();\nconst startYear = 1950;\nconst years = Array.from(\n  { length: currentYear - startYear + 1 },\n  (e, idx) => startYear + idx\n).reverse();\n\ntype HeaderProps = {\n  onSearch: (value: Search['phrase'], year?: Search['year']) => void;\n  phrase?: Search['phrase'];\n  year?: Search['year'];\n};\n\nconst Header: React.FC<HeaderProps> = ({\n  onSearch,\n  phrase,\n  year: initialYear\n}) => {\n  const [search, setSearch] = useState(phrase);\n  const [year, setYear] = useState(initialYear);\n  useEffect(() => {\n    if (search !== undefined) {\n      onSearch(search, year || undefined);\n    }\n  }, [onSearch, search, year]);\n\n  return (\n    <header className={styles['header']}>\n      <div className={styles['logo']}>\n        <img className={styles['logo__image']} alt=\"Logo\" src=\"/logo.png\" />\n        Movies Search\n      </div>\n      <form onSubmit={e => e.preventDefault()} className={styles['form']}>\n        <input\n          className={styles['form__input']}\n          autoFocus={true}\n          value={search}\n          placeholder=\"Search\"\n          onChange={e => setSearch(e.target.value)}\n        />\n        {!!search && (\n          <select\n            value={year}\n            onChange={e => setYear(e.target.value)}\n            className={styles['form__select']}\n            placeholder=\"Select year\"\n          >\n            <option value=\"\">Select Year</option>\n            {years.map(year => (\n              <option key={`search-year-option-${year}`} value={year}>\n                {year}\n              </option>\n            ))}\n            <option />\n          </select>\n        )}\n      </form>\n    </header>\n  );\n};\n\nexport default React.memo(Header);\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router';\n\nimport { searchMovies as searchMoviesAction } from '../../store/actions';\nimport { selectPhrase, selectYear } from '../../store/selectors';\nimport Header from './Header';\n\nconst HeaderContainer = withRouter(({ history }) => {\n  const phrase = useSelector(selectPhrase());\n  const year = useSelector(selectYear());\n  const dispatch = useDispatch();\n  const onSearch = useCallback(\n    (phrase: Search['phrase'], year?: Search['year']) => {\n      dispatch(searchMoviesAction({ phrase, year }));\n      if (phrase) {\n        history.push(`/search?phrase=${phrase}${year ? `&year=${year}` : ''}`);\n      } else {\n        history.push('/');\n      }\n    },\n    [dispatch, history]\n  );\n\n  return <Header year={year} phrase={phrase} onSearch={onSearch} />;\n});\n\nexport default React.memo(HeaderContainer);\n","export const selectIsLoading = () => (state: State) => state.movies.isLoading;\n\nexport const selectMoviesData = () => (state: State) => state.movies;\n\nexport const selectPhrase = () => (state: State) => state.movies.phrase;\n\nexport const selectYear = () => (state: State) => state.movies.year;\n\nexport const selectHasMore = () => (state: State) => {\n  const { total, movies } = state.movies;\n  return movies.length < total;\n};\n","import cx from 'classnames';\nimport React, { useEffect, useState } from 'react';\n\nimport style from './progressive-image.module.scss';\n\ntype ProgressiveImageProps = {\n  preview: string;\n  src: string;\n} & JSX.IntrinsicElements['img'];\n\nconst ProgressiveImage: React.FC<ProgressiveImageProps> = ({\n  src,\n  preview,\n  className,\n  alt,\n  ...props\n}) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  const image = new Image();\n  image.onload = () =>\n    setIsLoaded(currentValue => (currentValue === false ? true : currentValue));\n  image.src = src;\n\n  useEffect(() => {\n    setIsLoaded(currentValue => (currentValue === true ? false : currentValue));\n  }, [src]);\n\n  return (\n    <img\n      src={isLoaded ? src : preview}\n      className={cx(className, style['image'], {\n        [style['image_progress']]: !isLoaded\n      })}\n      alt={alt}\n      {...props}\n    />\n  );\n};\n\nexport default React.memo<ProgressiveImageProps>(ProgressiveImage);\n","import React from 'react';\n\nimport ProgressiveImage from '../ProgressiveImage';\nimport styles from './movies.module.scss';\n\ntype MovieProps = Pick<Movie, 'id' | 'title' | 'image' | 'vote'>;\n\nconst Movie: React.FC<MovieProps> = ({ id, title, image, vote }) => {\n  return (\n    <li className={styles['element']}>\n      <div className={styles['element__link']}>\n        <ProgressiveImage\n          className={styles['element__image']}\n          alt={title}\n          preview={image ? image.small : 'no-image.png'}\n          src={image ? image.medium : 'no-image.png'}\n          onError={e => {\n            (e.target as HTMLImageElement).src = 'no-image.png';\n          }}\n        />\n        <span className={styles['element__vote-wrapper']}>\n          <span className={styles['element__vote']}>{vote}</span>\n        </span>\n        <span className={styles['element__title']}>{title}</span>\n      </div>\n    </li>\n  );\n};\n\nexport default Movie;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectIsLoading } from '../../store/selectors';\nimport Movie from './Movie';\nimport styles from './movies.module.scss';\n\ntype MoviesProps = Pick<Movies, 'movies'>;\n\nconst MoviesComponent: React.FC<MoviesProps> = ({ movies }) => {\n  const isLoading = useSelector(selectIsLoading());\n\n  if (movies.length) {\n    return (\n      <ul className={styles['list']}>\n        {movies.map(movie => (\n          <Movie key={movie.id} {...movie} />\n        ))}\n      </ul>\n    );\n  }\n  return isLoading ? null : (\n    <div className={styles['no-results']}>No movies found</div>\n  );\n};\n\nexport default React.memo(MoviesComponent);\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\n\nimport { searchMovies as searchMoviesAction } from '../../store/actions';\nimport { selectMoviesData } from '../../store/selectors';\nimport Movies from './Movies';\n\nconst MoviesContainer: React.FC<RouteComponentProps> = ({ location }) => {\n  const { movies, page, phrase, year } = useSelector(selectMoviesData());\n  const dispatch = useDispatch();\n  if (page === 0 && phrase) {\n    dispatch(searchMoviesAction({ phrase, year }));\n  }\n  return <Movies movies={movies} />;\n};\n\nexport default React.memo(MoviesContainer);\n","import React from 'react';\n\ntype SpinnerProps = {\n  show: boolean;\n};\n\nconst Spinner: React.FC<SpinnerProps> = ({ show }) => {\n  return !show ? null : (\n    <div className=\"spinner\">\n      <span className=\"spinner__line1\" />\n      <span className=\"spinner__line2\" />\n      <span className=\"spinner__line3\" />\n      <span className=\"spinner__line4\" />\n      <span className=\"spinner__line5\" />\n    </div>\n  );\n};\n\nexport default React.memo(Spinner);\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Route } from 'react-router';\n\nimport { getMovies as getMoviesAction } from '../../store/actions';\nimport { selectHasMore, selectIsLoading } from '../../store/selectors';\nimport Movies from '../Movies';\nimport Spinner from '../Spinner';\n\nconst Main: React.FC = () => {\n  const isLoading = useSelector(selectIsLoading());\n  const hasMore = useSelector(selectHasMore());\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!isLoading) {\n      const removeListener = (callback: EventListener) => {\n        window.removeEventListener('scroll', callback);\n      };\n      const callback = () => {\n        const { documentElement } = document;\n        const top = window.innerHeight + documentElement.scrollTop;\n        const full = documentElement.offsetHeight;\n\n        if (top >= full - 50) {\n          dispatch(getMoviesAction());\n          if (hasMore) {\n            removeListener(callback);\n          }\n        }\n      };\n\n      window.addEventListener('scroll', callback);\n      return () => {\n        removeListener(callback);\n      };\n    }\n  }, [dispatch, hasMore, isLoading]);\n  return (\n    <section>\n      <Route path=\"/search\" component={Movies} />\n      <Spinner show={isLoading} />\n    </section>\n  );\n};\n\nexport default React.memo(Main);\n","import store from './store';\nimport React from 'react';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport Header from './components/Header';\nimport Main from './components/Main';\n\nconst App: React.FC = () => {\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <Header />\n        <Main />\n      </BrowserRouter>\n    </Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('app'));\n"],"sourceRoot":""}