(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports={list:"movies_list__i04n0","no-results":"movies_no-results__3WBe2",element:"movies_element__FOPWu",element_hidden:"movies_element_hidden__14YJv",element__link:"movies_element__link__3p-50",element__image:"movies_element__image__22ofU","element__vote-wrapper":"movies_element__vote-wrapper__1bvED",element__vote:"movies_element__vote__1rbbf",element__title:"movies_element__title__3l4GA"}},18:function(e,t,a){e.exports={header:"header_header__3fn4i",logo:"header_logo__14tHM",logo__image:"header_logo__image__cVPkB",form:"header_form__3Ry9u",form__input:"header_form__input__WncE_",form__select:"header_form__select__1eZjZ"}},29:function(e,t,a){e.exports={image:"progressive-image_image__Ar7dz",image_progress:"progressive-image_image_progress__9vKrS"}},40:function(e,t,a){e.exports=a(63)},45:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(21),s=a.n(o),i=(a(45),a(14)),u=a(39),l=a(24),m=a(17),p=a(33),_="MOVIES_FETCH",v="MOVIES_SEARCH",f=function(e){return{type:"MOVIES_SEARCH",phrase:e.phrase,year:e.year}},g=function(e,t){return{type:"MOVIES_RECEIVED",search:t,movies:e}},b=function(){return{type:"MOVIES_RESET"}};function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach(function(t){Object(m.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d=Object(p.parse)(window.location.search),E={isLoading:!1,phrase:d.phrase||void 0,year:d.year||void 0,movies:[],page:0,pages:0,total:0},j=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return Object.prototype.hasOwnProperty.call(t,n.type)?t[n.type](a,n):a}}(E,(n={},Object(m.a)(n,_,function(e){var t=e.movies,a=e.total;return t.length<a?O({},e,{isLoading:!0}):e}),Object(m.a)(n,"MOVIES_RESET",function(){return O({},E,{phrase:void 0,year:void 0})}),Object(m.a)(n,"MOVIES_RECEIVED",function(e,t){var a=t.movies,n=a.page,r=a.pages,c=a.total,o=a.movies,s=t.search;return O({},e,{phrase:s.phrase,year:s.year,page:n,pages:r,total:c,movies:1===n?Object(l.a)(o):[].concat(Object(l.a)(e.movies),Object(l.a)(o)),isLoading:!1})}),n)),y=Object(i.c)({movies:j}),w=a(6),x=a.n(w),S=a(8),N=a(34),k={mapResults:function(e){var t=e.results,a=e.total_results;return{page:e.page,pages:e.total_pages,total:a,movies:t.map(k.mapResult)}},mapResult:function(e){var t=e.id,a=e.overview,n=e.poster_path,r=e.release_date,c=e.title,o=e.vote_average;return{id:t,date:r,image:n?{small:"https://image.tmdb.org/t/p/w92".concat(n),medium:"https://image.tmdb.org/t/p/w300".concat(n),large:"https://image.tmdb.org/t/p/w780".concat(n)}:void 0,title:c,overview:a,vote:o}},prepareUrl:function(e){var t="api_key=03c93abb1975c0c02a167e1b3e8b63d4&page=".concat(e.page,"&query=").concat(e.query);return e.year&&(t="".concat(t,"&year=").concat(e.year)),"".concat("https://api.themoviedb.org/3","/search/movie?").concat(t)}},I={getMovies:function(){var e=Object(N.a)(x.a.mark(function e(t,a){var n,r,c,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.phrase,r=a.year,e.next=3,fetch(k.prepareUrl({page:t,query:n,year:r}));case 3:return c=e.sent,e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",k.mapResults(o));case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},P=x.a.mark(V),R=x.a.mark(C),M=x.a.mark(H),D=x.a.mark(T),L=x.a.mark(U);function V(e,t){var a;return x.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(S.b)(I.getMovies,e,t);case 2:return a=n.sent,n.next=5,Object(S.d)(g(a,t));case 5:case"end":return n.stop()}},P)}function C(){var e,t,a,n;return x.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(S.e)(function(e){var t=e.movies;return{phrase:t.phrase,year:t.year}});case 2:if(e=r.sent,t=e.phrase,a=e.year,t){r.next=10;break}return r.next=8,Object(S.d)(b());case 8:r.next=19;break;case 10:return r.next=12,Object(S.e)(function(e){var t=e.movies,a=t.total;return t.movies.length<a});case 12:if(!r.sent){r.next=19;break}return r.next=16,Object(S.e)(function(e){return e.movies.page});case 16:return n=r.sent,r.next=19,Object(S.b)(V,n+1,{phrase:t,year:a});case 19:case"end":return r.stop()}},R)}function H(e){var t,a;return x.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.phrase,a=e.year,t){n.next=6;break}return n.next=4,Object(S.d)(b());case 4:n.next=8;break;case 6:return n.next=8,Object(S.b)(V,1,{phrase:t,year:a});case 8:case"end":return n.stop()}},M)}function T(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.f)(_,C);case 2:case"end":return e.stop()}},D)}function U(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.c)(500,v,H);case 2:case"end":return e.stop()}},L)}var A=x.a.mark(B);function B(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)([T(),U()]);case 2:case"end":return e.stop()}},A)}var F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,q=Object(u.a)(),J=Object(i.e)(y,F(Object(i.a)(q)));q.run(B);var W=J,Y=a(7),X=a(38),Z=a(11),z=a(20),G=a(18),K=a.n(G),Q=(new Date).getFullYear(),$=Array.from({length:Q-1950+1},function(e,t){return 1950+t}).reverse(),ee=c.a.memo(function(e){var t=e.onSearch,a=e.phrase,n=e.year,o=Object(r.useState)(a),s=Object(z.a)(o,2),i=s[0],u=s[1],l=Object(r.useState)(n),m=Object(z.a)(l,2),p=m[0],_=m[1];return Object(r.useEffect)(function(){void 0!==i&&t(i,p||void 0)},[t,i,p]),c.a.createElement("header",{className:K.a.header},c.a.createElement("div",{className:K.a.logo},c.a.createElement("img",{className:K.a.logo__image,alt:"Logo",src:"%PUBLIC_URL%/logo.png"}),"Movies Search"),c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:K.a.form},c.a.createElement("input",{className:K.a.form__input,autoFocus:!0,value:i,placeholder:"Search",onChange:function(e){return u(e.target.value)}}),!!i&&c.a.createElement("select",{value:p,onChange:function(e){return _(e.target.value)},className:K.a.form__select,placeholder:"Select year"},c.a.createElement("option",{value:""},"Select Year"),$.map(function(e){return c.a.createElement("option",{key:"search-year-option-".concat(e),value:e},e)}),c.a.createElement("option",null))))}),te=Object(Z.e)(function(e){var t=e.history,a=Object(Y.c)(function(e){return e.movies.phrase}),n=Object(Y.c)(function(e){return e.movies.year}),o=Object(Y.b)(),s=Object(r.useCallback)(function(e,a){o(f({phrase:e,year:a})),e?t.push("/search?phrase=".concat(e).concat(a?"&year=".concat(a):"")):t.push("/")},[o,t]);return c.a.createElement(ee,{year:n,phrase:a,onSearch:s})}),ae=c.a.memo(te),ne=a(36),re=a(37),ce=a.n(re),oe=a(29),se=a.n(oe),ie=c.a.memo(function(e){var t=e.src,a=e.preview,n=e.className,o=e.alt,s=Object(ne.a)(e,["src","preview","className","alt"]),i=Object(r.useState)(!1),u=Object(z.a)(i,2),l=u[0],p=u[1],_=new Image;return _.onload=function(){return p(function(e){return!1===e||e})},_.src=t,Object(r.useEffect)(function(){p(function(e){return!0!==e&&e})},[t]),c.a.createElement("img",Object.assign({src:l?t:a,className:ce()(n,se.a.image,Object(m.a)({},se.a.image_progress,!l)),alt:o},s))}),ue=a(15),le=a.n(ue),me=function(e){e.id;var t=e.title,a=e.image,n=e.vote;return c.a.createElement("li",{className:le.a.element},c.a.createElement("div",{className:le.a.element__link},c.a.createElement(ie,{className:le.a.element__image,alt:t,preview:a?a.small:"no-image.png",src:a?a.medium:"no-image.png",onError:function(e){e.target.src="no-image.png"}}),c.a.createElement("span",{className:le.a["element__vote-wrapper"]},c.a.createElement("span",{className:le.a.element__vote},n)),c.a.createElement("span",{className:le.a.element__title},t)))},pe=c.a.memo(function(e){var t=e.movies,a=Object(Y.c)(function(e){return e.movies.isLoading});return t.length?c.a.createElement("ul",{className:le.a.list},t.map(function(e){return c.a.createElement(me,Object.assign({key:e.id},e))})):a?null:c.a.createElement("div",{className:le.a["no-results"]},"No movies found")}),_e=c.a.memo(function(e){e.location;var t=Object(Y.c)(function(e){return e.movies}),a=t.movies,n=t.page,r=t.phrase,o=t.year,s=Object(Y.b)();return 0===n&&r&&s(f({phrase:r,year:o})),c.a.createElement(pe,{movies:a})}),ve=c.a.memo(function(e){return e.show?c.a.createElement("div",{className:"spinner"},c.a.createElement("span",{className:"spinner__line1"}),c.a.createElement("span",{className:"spinner__line2"}),c.a.createElement("span",{className:"spinner__line3"}),c.a.createElement("span",{className:"spinner__line4"}),c.a.createElement("span",{className:"spinner__line5"})):null}),fe=c.a.memo(function(){var e=Object(Y.c)(function(e){return e.movies.isLoading}),t=Object(Y.c)(function(e){var t=e.movies,a=t.total;return t.movies.length<a}),a=Object(Y.b)();return Object(r.useEffect)(function(){if(!e){var n=function(e){window.removeEventListener("scroll",e)},r=function e(){var r=document.documentElement;window.innerHeight+r.scrollTop>=r.offsetHeight-50&&(a({type:_}),t&&n(e))};return window.addEventListener("scroll",r),function(){n(r)}}},[a,t,e]),c.a.createElement("section",null,c.a.createElement(Z.a,{path:"/search",component:_e}),c.a.createElement(ve,{show:e}))}),ge=function(){return c.a.createElement(Y.a,{store:W},c.a.createElement(X.a,null,c.a.createElement(ae,null),c.a.createElement(fe,null)))};s.a.render(c.a.createElement(ge,null),document.getElementById("app"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9a4bdcdd.chunk.js.map